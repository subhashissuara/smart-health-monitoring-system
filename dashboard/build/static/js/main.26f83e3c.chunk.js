(this["webpackJsonpiot-dashboard"]=this["webpackJsonpiot-dashboard"]||[]).push([[0],{108:function(e,t,a){},109:function(e,t,a){},14:function(e){e.exports=JSON.parse('{"TEST_URL_WS":"ws://localhost:5000","TEST_URL_LOGIN":"http://localhost:5000/api/authenticate/login","TEST_URL_REGISTER":"http://localhost:5000/api/authenticate/register","TEST_URL_AUTHORIZE":"http://localhost:5000/api/authorize","PRODUCTION_URL_AUTHORIZE":"http://52.172.44.216:5000/api/authorize","PRODUCTION_URL_WS":"ws://52.172.44.216:5000","PRODUCTION_URL_LOGIN":"http://52.172.44.216:5000/api/authenticate/login","PRODUCTION_URL_REGISTER":"http://52.172.44.216:5000/api/authenticate/register","DEVICE_IDS":["IOT_DEVICE_1","IOT_DEVICE_2"]}')},202:function(e,t,a){},203:function(e,t,a){},204:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(72),o=a.n(s),i=(a(80),a(19)),c=a(2),l=a(31),b=a(73),d=a(0),m=["component"],u=function(e){var t=e.component,a=Object(b.a)(e,m);return Object(d.jsx)(c.b,Object(l.a)(Object(l.a)({},a),{},{render:function(e){return localStorage.getItem("authToken")?Object(d.jsx)(t,Object(l.a)({},e)):Object(d.jsx)(c.a,{to:"/login"})}}))},p=a(29),h=a(8),j=a(16),g=a.n(j),O=a(30),f=a.n(O),x=(a(108),a(109),function(e){var t=e.history;return Object(d.jsx)("nav",{children:Object(d.jsxs)("div",{className:"nav-container",children:[Object(d.jsx)(i.b,{exact:!0,to:"/",className:"nav-logo",children:Object(d.jsx)("h2",{children:"Smart Health Monitoring System"})}),Object(d.jsx)("div",{className:"nav-links",children:Object(d.jsx)("button",{onClick:function(){localStorage.removeItem("authToken"),t.push("/login")},className:"nav-btn",children:"Logout"})})]})})}),S={red:"rgb(255, 0, 0)",lightred:"rgb(255, 99, 132)",orange:"rgb(255, 140, 0)",lightorange:"rgb(255, 165, 0)",yellow:"rgb(255, 205, 86)",green:"rgb(75, 192, 192)",blue:"rgb(54, 162, 235)",lightblue:"rgb(55, 255, 255)",purple:"rgb(153, 102, 255)",lightpurple:"rgb(204, 153, 255)",grey:"rgb(201, 203, 207)"},v={details:{id:"Patient 1",name:"Name: Subhashis Jha Mohanty",dob:"Date of Admission: 19-12-2021",gender:"Gender: Female",age:"Age: 34",comorbidity:"Co-mobidity: Diabetes, High Blood Pressure"},ambTempChart:{color:{bgColor:S.lightpurple,borderColor:S.purple},chartLabel:"Ambient Temperature Sensor",xlabelString:"Today's Time",ylabelString:"Ambient Temperature"},bodyTempChart:{color:{bgColor:S.lightorange,borderColor:S.orange},chartLabel:"Body Temperature Sensor",xlabelString:"Today's Time",ylabelString:"Body Temperature"},spo2Chart:{color:{bgColor:S.lightblue,borderColor:S.blue},chartLabel:"Blood-Pulse Oximeter Sensor",xlabelString:"Today's Time",ylabelString:"Oximeter"},hrChart:{color:{bgColor:S.lightred,borderColor:S.red},chartLabel:"Heart-rate Monitor Sensor",xlabelString:"Today's Time",ylabelString:"Heartrate"},ecgChart:{color:{bgColor:S.green,borderColor:S.green},chartLabel:"ECG Sensor",xlabelString:"Today's Time",ylabelString:"ECG"}},y=a(12),C=(a(27),a(28),{});function T(e){e.config.data.datasets.forEach((function(e){var t;e.data.push({x:C.timestamp||Date.now(),y:(t=C.timestamp,Date.now()-t<2e3?C.sensorValue:null)})}))}var N=function(e){var t=e.config,a=e.timestamp,n=e.sensorValue;return Object(r.useEffect)((function(){C={timestamp:a,sensorValue:n}}),[a,n]),Object(d.jsx)("div",{className:"data-chart",children:Object(d.jsx)(y.Line,{data:{datasets:[{label:t.chartLabel,data:[],backgroundColor:t.color.bgColor,borderColor:t.color.borderColor,borderWidth:4}]},height:200,options:{maintainAspectRatio:!1,responsive:!0,scales:{xAxes:[{scaleLabel:{display:!0,labelString:t.xlabelString},type:"realtime",realtime:{duration:3e4,refresh:1e3,delay:2e3,onRefresh:T}}],yAxes:[{scaleLabel:{display:!0,labelString:t.ylabelString},ticks:{autoSkip:!0,maxTicksLimit:10,beginAtZero:!0}}]},tooltips:{mode:"nearest",intersect:!1},hover:{mode:"nearest",intersect:!1}}})})},A={};function L(e){e.config.data.datasets.forEach((function(e){var t;e.data.push({x:A.timestamp||Date.now(),y:(t=A.timestamp,Date.now()-t<2e3?A.sensorValue:null)})}))}var _=function(e){var t=e.config,a=e.timestamp,n=e.sensorValue;return Object(r.useEffect)((function(){A={timestamp:a,sensorValue:n}}),[a,n]),Object(d.jsx)("div",{className:"data-chart",children:Object(d.jsx)(y.Line,{data:{datasets:[{label:t.chartLabel,data:[],backgroundColor:t.color.bgColor,borderColor:t.color.borderColor,borderWidth:4}]},height:200,options:{maintainAspectRatio:!1,responsive:!0,scales:{xAxes:[{scaleLabel:{display:!0,labelString:t.xlabelString},type:"realtime",realtime:{duration:3e4,refresh:1e3,delay:2e3,onRefresh:L}}],yAxes:[{scaleLabel:{display:!0,labelString:t.ylabelString},ticks:{autoSkip:!0,maxTicksLimit:10,beginAtZero:!0}}]},tooltips:{mode:"nearest",intersect:!1},hover:{mode:"nearest",intersect:!1}}})})},D={};function E(e){e.config.data.datasets.forEach((function(e){var t;e.data.push({x:D.timestamp||Date.now(),y:(t=D.timestamp,Date.now()-t<2e3?D.sensorValue:null)})}))}var I=function(e){var t=e.config,a=e.timestamp,n=e.sensorValue;return Object(r.useEffect)((function(){D={timestamp:a,sensorValue:n}}),[a,n]),Object(d.jsx)("div",{className:"data-chart",children:Object(d.jsx)(y.Line,{data:{datasets:[{label:t.chartLabel,data:[],backgroundColor:t.color.bgColor,borderColor:t.color.borderColor,borderWidth:4}]},height:200,options:{maintainAspectRatio:!1,responsive:!0,scales:{xAxes:[{scaleLabel:{display:!0,labelString:t.xlabelString},type:"realtime",realtime:{duration:3e4,refresh:1e3,delay:2e3,onRefresh:E}}],yAxes:[{scaleLabel:{display:!0,labelString:t.ylabelString},ticks:{autoSkip:!0,maxTicksLimit:10,beginAtZero:!0}}]},tooltips:{mode:"nearest",intersect:!1},hover:{mode:"nearest",intersect:!1}}})})},R={};function k(e){e.config.data.datasets.forEach((function(e){var t;e.data.push({x:R.timestamp||Date.now(),y:(t=R.timestamp,Date.now()-t<2e3?R.sensorValue:null)})}))}var V=function(e){var t=e.config,a=e.timestamp,n=e.sensorValue;return Object(r.useEffect)((function(){R={timestamp:a,sensorValue:n}}),[a,n]),Object(d.jsx)("div",{className:"data-chart",children:Object(d.jsx)(y.Line,{data:{datasets:[{label:t.chartLabel,data:[],backgroundColor:t.color.bgColor,borderColor:t.color.borderColor,borderWidth:4}]},height:200,options:{maintainAspectRatio:!1,responsive:!0,scales:{xAxes:[{scaleLabel:{display:!0,labelString:t.xlabelString},type:"realtime",realtime:{duration:3e4,refresh:1e3,delay:2e3,onRefresh:k}}],yAxes:[{scaleLabel:{display:!0,labelString:t.ylabelString},ticks:{autoSkip:!0,maxTicksLimit:10,beginAtZero:!0}}]},tooltips:{mode:"nearest",intersect:!1},hover:{mode:"nearest",intersect:!1}}})})},w=(a(202),a(20)),U=a.n(w),P=a(14),H=function(e){var t=e.sensorConfig,a=e.sensorData,n=Object(r.useState)("Offline"),s=Object(h.a)(n,2),o=s[0],i=s[1],c=Object(r.useState)(U()("indicator","offline")),l=Object(h.a)(c,2),b=l[0],m=l[1],u=Object(r.useState)("NA"),p=Object(h.a)(u,2),j=p[0],g=p[1],O=Object(r.useState)({amb_temp:"NA",body_temp:"NA",spo2:"NA",bpm:"NA"}),f=Object(h.a)(O,2),x=f[0],S=f[1];return Object(r.useEffect)((function(){a.sensorType&&P.DEVICE_IDS.map((function(e){return e.toLowerCase()})).includes(a.deviceId.toLowerCase())?(i("Online"),m(U()("indicator","online")),a.timestamp&&g("".concat(new Date(a.timestamp).toDateString()," at ").concat(new Date(a.timestamp).toLocaleTimeString("en-IN").replace("am","AM").replace("pm","PM")))):(i("Offline"),m(U()("indicator","offline")),g("NA"));var e=setInterval((function(){Date.now()-a.timestamp>2e3&&(i("Offline"),m(U()("indicator","offline")),S({amb_temp:"NA",body_temp:"NA",spo2:x.spo2,bpm:x.bpm}))}),2e3);return S({amb_temp:a.sensorValues?a.sensorValues.amb_temp?a.sensorValues.amb_temp:x.amb_temp:"NA",body_temp:a.sensorValues?a.sensorValues.body_temp?a.sensorValues.body_temp:x.body_temp:"NA",spo2:a.sensorValues?a.sensorValues.spo2?a.sensorValues.spo2:x.spo2:"NA",bpm:a.sensorValues?a.sensorValues.bpm?a.sensorValues.bpm:x.bpm:"NA"}),function(){clearInterval(e)}}),[a,t]),Object(d.jsxs)("div",{className:"sensor-container",children:[Object(d.jsxs)("div",{className:"sensor-text",children:[Object(d.jsx)("div",{className:"sensor-text-heading",children:Object(d.jsx)("h2",{children:t.details.id})}),Object(d.jsxs)("div",{className:"details-container",children:[Object(d.jsxs)("div",{className:"patient-metadata-container",children:[Object(d.jsx)("h3",{children:"Patient Details"}),Object(d.jsxs)("div",{className:"patient-metadata",children:[Object(d.jsx)("p",{children:t.details.name}),Object(d.jsx)("p",{children:t.details.dob}),Object(d.jsx)("p",{children:t.details.age}),Object(d.jsx)("p",{children:t.details.gender}),Object(d.jsx)("p",{children:t.details.comorbidity})]})]}),Object(d.jsxs)("div",{className:"sensor-details-container",children:[Object(d.jsx)("h3",{children:"Sensor Details"}),Object(d.jsxs)("div",{className:"sensor-details",children:[Object(d.jsxs)("p",{children:["Device Status: ",o,Object(d.jsx)("span",{className:b})]}),Object(d.jsxs)("p",{children:["Ambient Temperature: ",x.amb_temp]}),Object(d.jsxs)("p",{children:["Body Temperature: ",x.body_temp]}),Object(d.jsxs)("p",{children:["SpO2: ",x.spo2]}),Object(d.jsxs)("p",{children:["Heart Rate: ",x.bpm]}),Object(d.jsxs)("p",{children:["Sensor Last Updated: ",j]})]})]})]})]}),Object(d.jsxs)("div",{className:"sensor-chart",children:[Object(d.jsx)(N,{config:t.ambTempChart,timestamp:a.timestamp,sensorValue:"NA"!==x.amb_temp?x.amb_temp:null}),Object(d.jsx)(_,{config:t.bodyTempChart,timestamp:a.timestamp,sensorValue:"NA"!==x.body_temp?x.body_temp:null}),Object(d.jsx)(I,{config:t.spo2Chart,timestamp:a.timestamp,sensorValue:"NA"!==x.spo2?x.spo2:null}),Object(d.jsx)(V,{config:t.hrChart,timestamp:a.timestamp,sensorValue:"NA"!==x.bpm?x.bpm:null})]})]})},B=function(e){var t=e.history,a=Object(r.useState)(""),n=Object(h.a)(a,2),s=n[0],o=n[1],i=Object(r.useState)({}),c=Object(h.a)(i,2),l=c[0],b=c[1],m=Object(r.useRef)(null);return Object(r.useEffect)((function(){localStorage.getItem("authToken")||t.push("/login");var e=function(){m.current=new WebSocket(P.PRODUCTION_URL_WS);var e={deviceId:"DASHBOARD",type:"DASHBOARD"};m.current.onopen=function(){console.log("Connected to Server!"),m.current.send(JSON.stringify(e))},m.current.onerror=function(e){console.log("Error: ".concat(e))},m.current.onclose=function(){console.log("Disconnected from Server!")},m.current.onmessage=function(e){var t=e.data;b(JSON.parse(t))}},a=function(){var a=Object(p.a)(g.a.mark((function a(){var r,n;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}},a.prev=1,a.next=4,f.a.get(P.PRODUCTION_URL_AUTHORIZE,r);case 4:n=a.sent,"ACCESS_GRANTED"===n.data.data&&e(),a.next=14;break;case 9:a.prev=9,a.t0=a.catch(1),localStorage.removeItem("authToken"),o("You are not authorized please login"),setTimeout((function(){t.push("/login")}),3e3);case 14:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(){return a.apply(this,arguments)}}();return a(),function(){m.current&&m.current.close()}}),[t]),s?Object(d.jsx)("span",{className:"error-message",children:s}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x,{history:t}),Object(d.jsx)("div",{className:"data",children:Object(d.jsx)(H,{sensorConfig:v,sensorData:l})})]})},G=(a(203),function(e){var t=e.history,a=Object(r.useState)(""),n=Object(h.a)(a,2),s=n[0],o=n[1],i=Object(r.useState)(""),c=Object(h.a)(i,2),l=c[0],b=c[1],m=Object(r.useState)(""),u=Object(h.a)(m,2),j=u[0],O=u[1];Object(r.useEffect)((function(){localStorage.getItem("authToken")&&t.push("/")}),[t]);var x=function(){var e=Object(p.a)(g.a.mark((function e(a){var r,n,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),r={header:{"Content-Type":"application/json"}},e.prev=2,e.next=5,f.a.post(P.PRODUCTION_URL_LOGIN,{email:s,password:l},r);case 5:n=e.sent,o=n.data,localStorage.setItem("authToken",o.token),t.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),O(e.t0.response.data.error),setTimeout((function(){O("")}),5e3);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"login-screen",children:Object(d.jsxs)("form",{onSubmit:x,className:"login-screen-form",children:[Object(d.jsx)("h2",{className:"login-screen-title",children:"Smart Health Monitoring System"}),j&&Object(d.jsx)("span",{className:"error-message",children:j}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"email",children:"Email"}),Object(d.jsx)("input",{type:"email",required:!0,id:"email",placeholder:"Email address",onChange:function(e){return o(e.target.value)},value:s,tabIndex:1})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"password",children:"Password"}),Object(d.jsx)("input",{type:"password",required:!0,id:"password",autoComplete:"true",placeholder:"Enter your password",onChange:function(e){return b(e.target.value)},value:l,tabIndex:2})]}),Object(d.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})]})})}),F=function(){return Object(d.jsx)(i.a,{basename:"/smart-health-monitoring-system",children:Object(d.jsxs)(c.d,{children:[Object(d.jsx)(u,{exact:!0,path:"/",component:B}),Object(d.jsx)(c.b,{exact:!0,path:"/login",component:G})]})})},W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,205)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),r(e),n(e),s(e),o(e)}))};o.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(F,{})}),document.getElementById("root")),W()},28:function(e,t,a){},80:function(e,t,a){}},[[204,1,2]]]);
//# sourceMappingURL=main.26f83e3c.chunk.js.map